import{b as R,f as a,G,C as F,B as O,H as U,o as c,c as v,a as o,h as b,w as $,F as W,l as P,k as A,J,y as E,t as l,p as B,e as I,n as g,E as q,i as D}from"./index-B73diPbf.js";import{T as S}from"./TheTitle-D9tA1R1j.js";import{u as K}from"./map-DHJ0Hfuq.js";import{u as Q}from"./global-29Ex4llw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"container mx-auto max-md:px-4 relative max-xl:px-4"},Y={class:"flex max-xl:flex-wrap max-xl:flex-col-reverse max-xl:gap-y-10 gap-x-10"},ee={class:"w-full"},te={class:"max-xl:h-[600px] max-xl:overflow-auto max-xl:px-4 max-lg:px-0"},oe={class:"flex flex-col gap-y-6 mt-5"},se=["onMouseenter","onClick"],ne={class:"bg-white p-4 max-sm:p-2 rounded-2xl z-20 relative text-center max-md:flex max-md:flex-col max-sm:flex-row max-[375px]:flex-col max-md:justify-around max-md:items-center"},ae={class:"flex justify-center flex-col items-center"},le={class:"mt-3"},re={class:"flex flex-col max-sm:w-full max-sm:mt-4 gap-y-5"},de={class:"flex items-center gap-x-2 z-20 relative"},ie={class:"w-10/12 max-sm:w-full"},ue={class:"flex items-center gap-x-2 z-20 relative"},pe={class:"flex gap-x-4 w-9/12 max-sm:w-full"},ce={class:"max-sm:hidden"},ve={key:0},ge=R({__name:"locations",setup(he){const _=K(),p=a(null),d=a(null),h=a(null),x=a(null),i=a(!1),f=a(!1),u=a(!1),M=a("auto"),m=a(!1);let w=null;const z=Q(),{t:k}=G(),C=()=>{u.value=window.innerWidth<=1280},L=()=>{if(!h.value||!x.value||u.value)return;const e=h.value.getBoundingClientRect(),s=x.value.offsetHeight;e.top<=10&&e.bottom>x.value.clientHeight?(i.value=!0,f.value=!1,M.value=`${h.value.getBoundingClientRect().left}px`):e.bottom<=s+10?(i.value=!1,f.value=!0):(i.value=!1,f.value=!1)};F(()=>{C(),window.addEventListener("resize",C),window.addEventListener("scroll",L)}),O(()=>{window.removeEventListener("resize",C),window.removeEventListener("scroll",L)});const V=()=>{if(document.getElementById("yandex-maps-script"))return;const e=document.createElement("script");e.id="yandex-maps-script",e.src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=fc906a8f-366e-48a2-8be7-17e554ed7bd2",e.async=!0,e.onload=()=>{m.value=!0,Z()},document.body.appendChild(e)},Z=async()=>{await _.loadAllShop(),ymaps.ready(()=>{var n;w=new ymaps.Map(d.value,{center:[41.3114,69.280226],zoom:12,controls:["zoomControl","trafficControl","rulerControl"]});const e=new ymaps.GeoObjectCollection(null,{preset:"islands#dotIcon",iconColor:"#FE5000"}),s=(n=_.shop)==null?void 0:n.map(t=>({coords:[t.longitude,t.latitude],id:t.id,address:t.address,address_uz:t.address_uz,title_uz:t.title_uz,title:t.title,landmark_uz:t.landmark_uz,landmark:t.landmark,close_at:t.close_at,open_at:t.open_at}));s==null||s.forEach(t=>{let r=new ymaps.Placemark(t.coords,{},{preset:"islands#dotIcon"});r.id=t.id,r.events.add("click",()=>{H({coords:t==null?void 0:t.coords,address:t==null?void 0:t.address,address_uz:t==null?void 0:t.address_uz,title_uz:t==null?void 0:t.title_uz,title:t==null?void 0:t.title,close_at:t==null?void 0:t.close_at,open_at:t==null?void 0:t.open_at,landmark:t==null?void 0:t.landmark,landmark_uz:t==null?void 0:t.landmark_uz})}),e.add(r)}),w.geoObjects.add(e)})},H=e=>{const s=`
    <div>
      <div class="custom-container">
        <h3>${e.title}</h3>
        <p><strong>${k("Адрес")}:</strong> ${z.language!=="ru"?e.address_uz:e.address}</p>
        <p><strong>${k("Режим работы")}:</strong> ${e.open_at} - ${e.close_at}</p>
        <p><strong>${k("Ориентир")}:</strong> ${z.language!=="ru"?e.landmark_uz:e.landmark}</p>
      </div>
      <button id="open-in-new" class="custom-btn">${k("Перейти")}</button>
    </div>
  `;console.log(e),w.balloon.open(e.coords,s);const n=document.getElementById("open-in-new");n&&n.addEventListener("click",()=>{}),setTimeout(()=>{const t=document.getElementById("open-in-new");t&&t.addEventListener("click",r=>{r.stopPropagation(),N(e.coords)})},100)},N=e=>{const s=`https://yandex.ru/maps/?ll=${e[1]},${e[0]}&mode=search&pt=${e[1]},${e[0]}&sll=${e[1]},${e[0]}&text=${e[0]},${e[1]}&z=16.04`;window.open(s,"_blank")},y=new IntersectionObserver(e=>{e[0].isIntersecting&&!m.value&&(V(),y.disconnect())},{threshold:.1}),T=e=>{w.setCenter(e,16,{checkZoomRange:!0,duration:500})};return F(()=>{if(d.value)y.observe(d.value);else{const e=setInterval(()=>{d.value&&(y.observe(d.value),clearInterval(e))},100)}}),U(()=>{m.value=!1;const e=document.getElementById("yandex-maps-script");e&&document.body.removeChild(e)}),(e,s)=>(c(),v("div",X,[o("div",Y,[o("div",ee,[b(S,{class:"max-xl:mb-4"},{default:$(()=>[E(l(e.$t("Адреса магазинов")),1)]),_:1}),o("div",te,[o("div",oe,[(c(!0),v(W,null,P(A(_).shop,n=>{var t,r;return c(),v("div",{class:"cursor-pointer flex max-sm:flex-col gap-x-4 bg-[#F2F2F2] p-6 max-sm:p-2 relative rounded-xl overflow-hidden h-max",onMouseenter:B(j=>p.value=n.id,["prevent"]),onMouseleave:s[0]||(s[0]=B(j=>p.value=null,["prevent"])),key:n.id,onClick:j=>T([n.longitude,n.latitude])},[o("div",ne,[o("div",ae,[s[1]||(s[1]=o("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M20.1667 11C20.1667 16.06 16.06 20.1666 11 20.1666C5.94 20.1666 1.83333 16.06 1.83333 11C1.83333 5.93998 5.94 1.83331 11 1.83331C16.06 1.83331 20.1667 5.93998 20.1667 11Z",stroke:"#FE5000","stroke-width":"1.375","stroke-linecap":"round","stroke-linejoin":"round"}),o("path",{d:"M14.4008 13.915L11.5592 12.2192C11.0642 11.9258 10.6608 11.22 10.6608 10.6425V6.88416",stroke:"#FE5000","stroke-width":"1.375","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),o("p",null,l(e.$t("Режим работы")+":"),1)]),o("div",le,[o("p",null,l(((t=n.open_at)==null?void 0:t.slice(0,5))+" - "+((r=n.close_at)==null?void 0:r.slice(0,5))),1),o("p",null,l("("+e.$t("без выходных")+")"),1)])]),o("div",re,[o("div",de,[s[2]||(s[2]=o("div",null,[o("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11 12.3118C12.5795 12.3118 13.86 11.0313 13.86 9.4518C13.86 7.87226 12.5795 6.5918 11 6.5918C9.42048 6.5918 8.14001 7.87226 8.14001 9.4518C8.14001 11.0313 9.42048 12.3118 11 12.3118Z",stroke:"#FE5000","stroke-width":"1.375"}),o("path",{d:"M3.31823 7.78315C5.12406 -0.15518 16.8849 -0.146013 18.6816 7.79232C19.7357 12.449 16.8391 16.3907 14.2999 18.829C12.4574 20.6073 9.5424 20.6073 7.69073 18.829C5.16073 16.3907 2.26406 12.4398 3.31823 7.78315Z",stroke:"#FE5000","stroke-width":"1.375"})])],-1)),o("p",ie,[E(l(e.$t("Адрес"))+": ",1),o("span",null,l(n.address),1)])]),o("div",ue,[s[3]||(s[3]=I('<div><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.1667 8.24999V13.75C20.1667 16.0417 19.7083 17.6458 18.6817 18.6817L12.8333 12.8333L19.9192 5.7475C20.0842 6.47166 20.1667 7.29666 20.1667 8.24999Z" stroke="#FE5000" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19.9192 5.74748L5.74749 19.9191C2.98833 19.2866 1.83334 17.38 1.83334 13.75V8.24998C1.83334 3.66665 3.66667 1.83331 8.25 1.83331H13.75C17.38 1.83331 19.2867 2.98832 19.9192 5.74748Z" stroke="#FE5000" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.6817 18.6817C17.6458 19.7083 16.0417 20.1666 13.75 20.1666H8.25C7.29667 20.1666 6.47166 20.0841 5.74749 19.9191L12.8333 12.8333L18.6817 18.6817Z" stroke="#FE5000" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.71999 7.31497C6.34332 4.62914 10.3767 4.62914 11 7.31497C11.3575 8.89164 10.3675 10.23 9.49665 11.055C8.86415 11.66 7.865 11.66 7.22334 11.055C6.3525 10.23 5.35332 8.89164 5.71999 7.31497Z" stroke="#FE5000" stroke-width="1.375"></path><path d="M8.33672 7.975H8.34495" stroke="#FE5000" stroke-width="1.83333" stroke-linecap="round" stroke-linejoin="round"></path></svg></div>',1)),o("p",pe,[o("span",null,l(e.$t("Ориентир"))+": "+l(n.landmark),1)])])]),o("div",ce,[o("div",{class:g(["bg-[#E8E8E8] rounded-[99px] flex items-center pl-4 w-[180px] absolute -right-32 h-full top-0 transition-all duration-200",{"bg-to transition-all duration-400 !rounded-[90px] scale-125":p.value===n.id}])},null,2),o("div",{class:g(["absolute top-0 bottom-0 flex items-center right-2 transition-all duration-200",{"right-[20px] transition-all duration-200":p.value===n.id}])},[(c(),v("svg",{class:g(["stroke-black transition-all duration-200",{"stroke-white transition-all duration-200 !scale-100":p.value==n.id}]),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s[4]||(s[4]=[I('<path d="M12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 7.85786 16.1421 4.5 12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 4V2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 12H2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 20V22" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20 12H22" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>',6)]),2))],2)])],40,se)}),128))])])]),o("div",{class:"w-10/12 max-xl:w-full max-lg:w-full",ref_key:"mapContainerMain",ref:h},[o("div",null,[b(S,{class:"text-[22px] font-omedium"},{default:$(()=>[E(l(e.$t("Мы на карте")),1)]),_:1}),b(J,{name:"fade",mode:"out-in"},{default:$(()=>{var n;return[o("div",{ref_key:"map",ref:x,class:g(["mt-5",{"fixed max-lg:static top-5":i.value&&!u.value,"absolute max-lg:static bottom-0":f.value&&!u.value}]),style:q({left:i.value&&!u.value?M.value:"auto",width:i.value&&!u.value?`${(n=d.value)==null?void 0:n.offsetWidth}px`:"100%"})},[o("div",null,[o("div",{ref_key:"mapContainer",ref:d,id:"map-placeholder"},[m.value?D("",!0):(c(),v("span",ve,"Карта загружается..."))],512)])],6)]}),_:1})])],512)])]))}});export{ge as default};
