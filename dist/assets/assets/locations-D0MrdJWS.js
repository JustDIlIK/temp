import{b as N,f as a,B as F,A as T,G as R,o as c,c as v,a as o,h as y,w as b,F as O,l as U,k as W,I as A,x as M,t as l,M as j,e as B,n as x,D as G,i as P}from"./index-BkCUxhqP.js";import{T as I}from"./TheTitle-CjXwfOy-.js";import{u as D}from"./map-B8ldjlWu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-rFEYxPUp.js";const q={class:"container mx-auto max-md:px-4 relative"},J={class:"flex max-xl:flex-wrap gap-x-10"},K={class:"w-full"},Q={class:"flex flex-col gap-y-6 mt-5"},X=["onMouseenter","onClick"],Y={class:"bg-white p-4 rounded-2xl z-20 relative text-center"},ee={class:"mt-3"},te={class:"flex flex-col max-sm:w-10/12 max-sm:mt-4 gap-y-5"},oe={class:"flex items-center max-md:flex-wrap gap-x-2 z-20 relative"},ne={class:"w-10/12"},se={class:"flex items-center gap-x-2 z-20 relative"},ae={class:"flex gap-x-4 w-9/12"},le={class:"max-sm:hidden"},re={key:0},he=N({__name:"locations",setup(de){const g=D(),u=a(null),d=a(null),h=a(null),w=a(null),i=a(!1),f=a(!1),p=a(!1),E=a("auto"),k=a(!1);let m=null;const C=()=>{p.value=window.innerWidth<=1280},$=()=>{if(!h.value||!w.value||p.value)return;const e=h.value.getBoundingClientRect(),n=w.value.offsetHeight;e.top<=10&&e.bottom>w.value.clientHeight?(i.value=!0,f.value=!1,E.value=`${h.value.getBoundingClientRect().left}px`):e.bottom<=n+10?(i.value=!1,f.value=!0):(i.value=!1,f.value=!1)};F(()=>{C(),window.addEventListener("resize",C),window.addEventListener("scroll",$)}),T(()=>{window.removeEventListener("resize",C),window.removeEventListener("scroll",$)});const z=()=>{if(document.getElementById("yandex-maps-script"))return;const e=document.createElement("script");e.id="yandex-maps-script",e.src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=fc906a8f-366e-48a2-8be7-17e554ed7bd2",e.async=!0,e.onload=()=>{k.value=!0,S()},document.body.appendChild(e)},S=async()=>{await g.loadAllShop(),ymaps.ready(()=>{var s;m=new ymaps.Map(d.value,{center:[41.3114,69.280226],zoom:12,controls:["zoomControl","trafficControl","rulerControl"]});const e=new ymaps.GeoObjectCollection(null,{preset:"islands#dotIcon",iconColor:"#FE5000"}),n=(s=g.shop)==null?void 0:s.map(t=>({coords:[t.longitude,t.latitude],id:t.id,address:t.address,title:t.title,landmark:t.landmark,close_at:t.close_at,open_at:t.open_at}));n==null||n.forEach(t=>{let r=new ymaps.Placemark(t.coords,{},{preset:"islands#dotIcon"});r.id=t.id,r.events.add("click",()=>{V({coords:t==null?void 0:t.coords,address:t==null?void 0:t.address,title:t==null?void 0:t.title,close_at:t==null?void 0:t.close_at,open_at:t==null?void 0:t.open_at,landmark:t==null?void 0:t.landmark})}),e.add(r)}),m.geoObjects.add(e)})},V=e=>{const n=`
    <div>
      <div class="custom-container">
        <h3>${e.title}</h3>
        <p><strong>Адрес:</strong> ${e.address}</p>
        <p><strong>Режим работы:</strong> ${e.open_at} - ${e.close_at}</p>
        <p><strong>Ориентир:</strong> ${e.landmark}</p>
      </div>
      <button id="open-in-new" class="custom-btn">Перейти</button>
    </div>
  `;console.log(e),m.balloon.open(e.coords,n);const s=document.getElementById("open-in-new");s&&s.addEventListener("click",()=>{}),setTimeout(()=>{const t=document.getElementById("open-in-new");t&&t.addEventListener("click",r=>{r.stopPropagation(),Z(e.coords)})},100)},Z=e=>{const n=`https://yandex.ru/maps/?ll=${e[1]},${e[0]}&mode=search&pt=${e[1]},${e[0]}&sll=${e[1]},${e[0]}&text=${e[0]},${e[1]}&z=16.04`;window.open(n,"_blank")},_=new IntersectionObserver(e=>{e[0].isIntersecting&&!k.value&&(z(),_.disconnect())},{threshold:.1}),H=e=>{m.setCenter(e,16,{checkZoomRange:!0,duration:500})};return F(()=>{if(d.value)_.observe(d.value);else{const e=setInterval(()=>{d.value&&(_.observe(d.value),clearInterval(e))},100)}}),R(()=>{k.value=!1;const e=document.getElementById("yandex-maps-script");e&&document.body.removeChild(e)}),(e,n)=>(c(),v("div",q,[o("div",J,[o("div",K,[y(I,null,{default:b(()=>[M(l(e.$t("Адреса магазинов")),1)]),_:1}),o("div",Q,[(c(!0),v(O,null,U(W(g).shop,s=>{var t,r;return c(),v("div",{class:"cursor-pointer flex max-sm:flex-col gap-x-4 bg-[#F2F2F2] p-6 relative rounded-xl overflow-hidden h-max",onMouseenter:j(L=>u.value=s.id,["prevent"]),onMouseleave:n[0]||(n[0]=j(L=>u.value=null,["prevent"])),key:s.id,onClick:L=>H([s.longitude,s.latitude])},[o("div",Y,[n[1]||(n[1]=o("div",{class:"flex justify-center"},[o("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M20.1667 11C20.1667 16.06 16.06 20.1666 11 20.1666C5.94 20.1666 1.83333 16.06 1.83333 11C1.83333 5.93998 5.94 1.83331 11 1.83331C16.06 1.83331 20.1667 5.93998 20.1667 11Z",stroke:"#FE5000","stroke-width":"1.375","stroke-linecap":"round","stroke-linejoin":"round"}),o("path",{d:"M14.4008 13.915L11.5592 12.2192C11.0642 11.9258 10.6608 11.22 10.6608 10.6425V6.88416",stroke:"#FE5000","stroke-width":"1.375","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),o("p",null,l(e.$t("Режим работы:")),1),o("div",ee,[o("p",null,l(((t=s.open_at)==null?void 0:t.slice(0,5))+" - "+((r=s.close_at)==null?void 0:r.slice(0,5))),1),o("p",null,l(e.$t("(без выходных)")),1)])]),o("div",te,[o("div",oe,[n[2]||(n[2]=o("div",null,[o("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M11 12.3118C12.5795 12.3118 13.86 11.0313 13.86 9.4518C13.86 7.87226 12.5795 6.5918 11 6.5918C9.42048 6.5918 8.14001 7.87226 8.14001 9.4518C8.14001 11.0313 9.42048 12.3118 11 12.3118Z",stroke:"#FE5000","stroke-width":"1.375"}),o("path",{d:"M3.31823 7.78315C5.12406 -0.15518 16.8849 -0.146013 18.6816 7.79232C19.7357 12.449 16.8391 16.3907 14.2999 18.829C12.4574 20.6073 9.5424 20.6073 7.69073 18.829C5.16073 16.3907 2.26406 12.4398 3.31823 7.78315Z",stroke:"#FE5000","stroke-width":"1.375"})])],-1)),o("p",ne,[M(l(e.$t("Адрес:"))+" ",1),o("span",null,l(s.address),1)])]),o("div",se,[n[3]||(n[3]=B('<div><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.1667 8.24999V13.75C20.1667 16.0417 19.7083 17.6458 18.6817 18.6817L12.8333 12.8333L19.9192 5.7475C20.0842 6.47166 20.1667 7.29666 20.1667 8.24999Z" stroke="#FE5000" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19.9192 5.74748L5.74749 19.9191C2.98833 19.2866 1.83334 17.38 1.83334 13.75V8.24998C1.83334 3.66665 3.66667 1.83331 8.25 1.83331H13.75C17.38 1.83331 19.2867 2.98832 19.9192 5.74748Z" stroke="#FE5000" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.6817 18.6817C17.6458 19.7083 16.0417 20.1666 13.75 20.1666H8.25C7.29667 20.1666 6.47166 20.0841 5.74749 19.9191L12.8333 12.8333L18.6817 18.6817Z" stroke="#FE5000" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.71999 7.31497C6.34332 4.62914 10.3767 4.62914 11 7.31497C11.3575 8.89164 10.3675 10.23 9.49665 11.055C8.86415 11.66 7.865 11.66 7.22334 11.055C6.3525 10.23 5.35332 8.89164 5.71999 7.31497Z" stroke="#FE5000" stroke-width="1.375"></path><path d="M8.33672 7.975H8.34495" stroke="#FE5000" stroke-width="1.83333" stroke-linecap="round" stroke-linejoin="round"></path></svg></div>',1)),o("p",ae,[o("span",null,l(e.$t("Ориентир:"))+" "+l(s.landmark),1)])])]),o("div",le,[o("div",{class:x(["bg-[#E8E8E8] rounded-[99px] flex items-center pl-4 w-[180px] absolute -right-32 h-full top-0 transition-all duration-200",{"bg-to transition-all duration-400 !rounded-[90px] scale-125":u.value===s.id}])},null,2),o("div",{class:x(["absolute top-0 bottom-0 flex items-center right-2 transition-all duration-200",{"right-[20px] transition-all duration-200":u.value===s.id}])},[(c(),v("svg",{class:x(["stroke-black transition-all duration-200",{"stroke-white transition-all duration-200 !scale-100":u.value==s.id}]),width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n[4]||(n[4]=[B('<path d="M12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 7.85786 16.1421 4.5 12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 4V2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 12H2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 20V22" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20 12H22" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>',6)]),2))],2)])],40,X)}),128))])]),o("div",{class:"w-10/12 max-xl:w-full max-lg:w-full",ref_key:"mapContainerMain",ref:h},[o("div",null,[y(I,{class:"text-[22px] font-omedium"},{default:b(()=>[M(l(e.$t("Мы на карте")),1)]),_:1}),y(A,{name:"fade",mode:"out-in"},{default:b(()=>{var s;return[o("div",{ref_key:"map",ref:w,class:x(["mt-5",{"fixed max-lg:static top-5":i.value&&!p.value,"absolute max-lg:static bottom-0":f.value&&!p.value}]),style:G({left:i.value&&!p.value?E.value:"auto",width:i.value&&!p.value?`${(s=d.value)==null?void 0:s.offsetWidth}px`:"100%"})},[o("div",null,[o("div",{ref_key:"mapContainer",ref:d,id:"map-placeholder"},[k.value?P("",!0):(c(),v("span",re,"Карта загружается..."))],512)])],6)]}),_:1})])],512)])]))}});export{he as default};
